{"version":3,"sources":["webpack://webpack_playground/./src/js/class.js","webpack://webpack_playground/webpack/bootstrap","webpack://webpack_playground/webpack/runtime/define property getters","webpack://webpack_playground/webpack/runtime/hasOwnProperty shorthand","webpack://webpack_playground/webpack/runtime/make namespace object","webpack://webpack_playground/./src/js/inclined-wall-ball/index.js","webpack://webpack_playground/./src/scss/main.scss"],"names":["Vector2D","x","y","Math","sqrt","lengthSquared","length","vec","k","lengthVec","proj","para","projection","u","positive","scaleBy","anticlockwise","vec1","vec2","acos","dotProduct","Point2D","CANVAS","width","height","background","BALL","radius","color","ACC","WALLS","Ball","randomSpeed","gravity","friction","velocity","random","ctx","save","fillStyle","beginPath","arc","PI","closePath","fill","restore","dt","incrementBy","multiply","Boundary","walls","forEach","o","i","moveTo","lineTo","lineWidth","lineJoin","strokeStyle","stroke","InclinedWallsAndBouncingBallsAnimation","cvs","canvas","balls","frameIsPaused","init","time","setCanvasSize","initBoundary","initEvents","animate","boundary","draw","initVisibilityChangeEvent","initClickEvent","window","addEventListener","document","visibilityState","performance","now","e","rect","target","getBoundingClientRect","mouseX","clientX","left","mouseY","clientY","top","push","$this","clearRect","animateBalls","requestAnimationFrame","bind","refreshLocation","splice","refreshSpeed","checkBoundary","style","backgroundColor","vectorAB","ball","index","vectorAToBall","vectorBToBall","vectorAToBallProj","project","vectorBToBallProj","distVector","subtract","dist","collisionDetection","perp","angle","deltaS","sin","displ","vcor","Velo","normalVelo","tangentVelo","addScaled","querySelector","getContext","instance"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAO,IAAMA,QAAb;AACE,oBAAYC,CAAZ,EAAeC,CAAf,EAAkB;AAAA;;AAChB,SAAKD,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACD;;AAJH;AAAA;AAAA,WAKE,yBAAgB;AACd,aAAO,KAAKD,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKC,CAAL,GAAS,KAAKA,CAAvC;AACD;AACD;AACF;AACA;AACA;AACA;AACA;;AAbA;AAAA;AAAA,WAcE,kBAAS;AACP,aAAOC,IAAI,CAACC,IAAL,CAAU,KAAKC,aAAL,EAAV,CAAP;AACD;AACD;AACF;AACA;AACA;AACA;AACA;;AAtBA;AAAA;AAAA,WAuBE,iBAAQ;AACN,aAAO,IAAIL,QAAJ,CAAa,KAAKC,CAAlB,EAAqB,KAAKC,CAA1B,CAAP;AACD;AACD;AACF;AACA;AACA;AACA;;AA9BA;AAAA;AAAA,WA+BE,kBAAS;AACP,WAAKD,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,WAAKC,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;AAzCA;AAAA;AAAA,WA0CE,qBAAY;AACV,UAAII,MAAM,GAAG,KAAKA,MAAL,EAAb;;AAA4B,UAAIA,MAAM,GAAG,CAAb,EAAgB;AAC1C,aAAKL,CAAL,IAAUK,MAAV;AACA,aAAKJ,CAAL,IAAUI,MAAV;AACD;;AACD,aAAO,KAAKA,MAAL,EAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;AAxDA;AAAA;AAAA,WAyDE,aAAIC,GAAJ,EAAS;AACP,aAAO,IAAIP,QAAJ,CAAa,KAAKC,CAAL,GAASM,GAAG,CAACN,CAA1B,EAA6B,KAAKC,CAAL,GAASK,GAAG,CAACL,CAA1C,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;AAlEA;AAAA;AAAA,WAmEE,qBAAYK,GAAZ,EAAiB;AACf,WAAKN,CAAL,IAAUM,GAAG,CAACN,CAAd;AACA,WAAKC,CAAL,IAAUK,GAAG,CAACL,CAAd;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;AA9EA;AAAA;AAAA,WA+EE,kBAASK,GAAT,EAAc;AACZ,aAAO,IAAIP,QAAJ,CAAa,KAAKC,CAAL,GAASM,GAAG,CAACN,CAA1B,EAA6B,KAAKC,CAAL,GAASK,GAAG,CAACL,CAA1C,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;AAxFA;AAAA;AAAA,WAyFE,qBAAYK,GAAZ,EAAiB;AACf,WAAKN,CAAL,IAAUM,GAAG,CAACN,CAAd;AACA,WAAKC,CAAL,IAAUK,GAAG,CAACL,CAAd;AACD;AAGD;AACF;AACA;AACA;AACA;AACA;;AApGA;AAAA;AAAA,WAqGE,kBAASM,CAAT,EAAY;AACV,aAAO,IAAIR,QAAJ,CAAaQ,CAAC,GAAG,KAAKP,CAAtB,EAAyBO,CAAC,GAAG,KAAKN,CAAlC,CAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;;AA9GA;AAAA;AAAA,WA+GE,iBAAQM,CAAR,EAAW;AACT,WAAKP,CAAL,IAAUO,CAAV;AAAa,WAAKN,CAAL,IAAUM,CAAV;AACd;AAGD;AACF;AACA;AACA;AACA;AACA;AACA;;AA1HA;AAAA;AAAA,WA2HE,oBAAWD,GAAX,EAAgB;AACd,aAAO,KAAKN,CAAL,GAASM,GAAG,CAACN,CAAb,GAAiB,KAAKC,CAAL,GAASK,GAAG,CAACL,CAArC;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;AArIA;AAAA;AAAA,WAsIE,oBAAWK,GAAX,EAAgB;AACd,UAAMD,MAAM,GAAG,KAAKA,MAAL,EAAf;AACA,UAAMG,SAAS,GAAGF,GAAG,CAACD,MAAJ,EAAlB;AACA,UAAII,IAAJ;;AACA,UAAKJ,MAAM,IAAI,CAAX,IAAkBG,SAAS,IAAI,CAAnC,EAAuC;AACrCC,YAAI,GAAG,CAAP;AACD,OAFD,MAEO;AACLA,YAAI,GAAG,CAAC,KAAKT,CAAL,GAASM,GAAG,CAACN,CAAb,GAAiB,KAAKC,CAAL,GAASK,GAAG,CAACL,CAA/B,IAAoCO,SAA3C;AACD;;AACD,aAAOC,IAAP;AACD;AAED;AACF;AACA;AACA;AACA;AACA;AACA;;AAxJA;AAAA;AAAA,WAyJE,iBAAQH,GAAR,EAAa;AACX,aAAOA,GAAG,CAACI,IAAJ,CAAS,KAAKC,UAAL,CAAgBL,GAAhB,CAAT,CAAP;AACD;AAGD;AACF;AACA;AACA;AACA;AACA;AACA;;AApKA;AAAA;AAAA,WAqKE,cAAKM,CAAL,EAAyB;AAAA,UAAjBC,QAAiB,uEAAN,IAAM;AAEvB,UAAMR,MAAM,GAAG,KAAKA,MAAL,EAAf;AACA,UAAMC,GAAG,GAAG,IAAIP,QAAJ,CAAa,KAAKC,CAAlB,EAAqB,KAAKC,CAA1B,CAAZ;;AACA,UAAIY,QAAJ,EAAc;AACZP,WAAG,CAACQ,OAAJ,CAAYF,CAAC,GAAGP,MAAhB;AACD,OAFD,MAEO;AACLC,WAAG,CAACQ,OAAJ,CAAY,CAACF,CAAD,GAAKP,MAAjB;AACD;;AACD,aAAOC,GAAP;AACD;AAGD;AACF;AACA;AACA;AACA;AACA;AACA;;AAxLA;AAAA;AAAA,WAyLE,cAAKM,CAAL,EAA8B;AAAA,UAAtBG,aAAsB,uEAAN,IAAM;AAC5B,UAAI,OAAQA,aAAR,KAA2B,WAA/B,EAA4CA,aAAa,GAAG,IAAhB;AAC5C,UAAIV,MAAM,GAAG,KAAKA,MAAL,EAAb;AACA,UAAIC,GAAG,GAAG,IAAIP,QAAJ,CAAa,KAAKE,CAAlB,EAAqB,CAAC,KAAKD,CAA3B,CAAV;;AACA,UAAIK,MAAM,GAAG,CAAb,EAAgB;AACd,YAAIU,aAAJ,EAAmB;AACjBT,aAAG,CAACQ,OAAJ,CAAYF,CAAC,GAAGP,MAAhB;AACD,SAFD,MAEO;AACLC,aAAG,CAACQ,OAAJ,CAAY,CAACF,CAAD,GAAKP,MAAjB;AACD;AACF,OAND,MAMO;AACLC,WAAG,GAAG,IAAIP,QAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAN;AACD;;AACD,aAAOO,GAAP;AACD;AAvMH;AAAA;AAAA,WAyME,mBAAUA,GAAV,EAAeC,CAAf,EAAkB;AAChB,aAAO,IAAIR,QAAJ,CAAa,KAAKC,CAAL,GAASO,CAAC,GAAGD,GAAG,CAACN,CAA9B,EAAiC,KAAKC,CAAL,GAASM,CAAC,GAAGD,GAAG,CAACL,CAAlD,CAAP;AACD;AAGD;AACF;AACA;AACA;AACA;AACA;AACA;;AApNA;;AAAA;AAAA;;gBAAaF,Q,kBAqNW,UAAUiB,IAAV,EAAgBC,IAAhB,EAAsB;AAC1C,SAAOf,IAAI,CAACgB,IAAL,CAAUF,IAAI,CAACG,UAAL,CAAgBF,IAAhB,KAAyBD,IAAI,CAACX,MAAL,KAAgBY,IAAI,CAACZ,MAAL,EAAzC,CAAV,CAAP;AACD,C;;AAII,IAAMe,OAAb,GACE,iBAAYpB,CAAZ,EAAeC,CAAf,EAAkB;AAAA;;AAChB,OAAKD,CAAL,GAASA,CAAT;AACA,OAAKC,CAAL,GAASA,CAAT;AACD,CAJH,C;;;;;;UC3NA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,wF;;;;;WCAA;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;;;;;;;;;;;;;ACNA;AAEA,IAAMoB,MAAM,GAAG;AACbC,OAAK,EAAE,GADM;AAEbC,QAAM,EAAE,GAFK;AAGbC,YAAU,EAAE;AAHC,CAAf;AAMA,IAAMC,IAAI,GAAG;AACXC,QAAM,EAAE,EADG;AAEXC,OAAK,EAAE;AAFI,CAAb;AAKA,IAAMC,GAAG,GAAG,GAAZ;AAEA,IAAMC,KAAK,GAAG,CACZ,CAAC,IAAIT,2CAAJ,CAAY,EAAZ,EAAgB,EAAhB,CAAD,EAAsB,IAAIA,2CAAJ,CAAY,EAAZ,EAAgB,GAAhB,CAAtB,CADY,EACgC;AAC5C,CAAC,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,EAAjB,CAAD,EAAuB,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAvB,CAFY,EAEkC;AAC9C,CAAC,IAAIA,2CAAJ,CAAY,EAAZ,EAAgB,GAAhB,CAAD,EAAuB,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAvB,CAHY,EAGkC;AAC9C,CAAC,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAD,EAAwB,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAxB,CAJY,EAImC;AAC/C,CAAC,IAAIA,2CAAJ,CAAY,EAAZ,EAAgB,GAAhB,CAAD,EAAuB,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAvB,CALY,EAKkC;AAC9C,CAAC,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAD,EAAwB,IAAIA,2CAAJ,CAAY,GAAZ,EAAiB,GAAjB,CAAxB,CANY,CAMkC;AANlC,CAAd;;IASMU,I;AACJ,gBAAY9B,CAAZ,EAAeC,CAAf,EAAgF;AAAA,QAA9D0B,KAA8D,uEAAtDF,IAAI,CAACE,KAAiD;AAAA,QAA1CD,MAA0C,uEAAjCD,IAAI,CAACC,MAA4B;AAAA,QAApBK,WAAoB,uEAAN,IAAM;;AAAA;;AAC9E,SAAK/B,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACA,SAAK0B,KAAL,GAAaA,KAAb;AACA,SAAKD,MAAL,GAAcA,MAAd;AACA,SAAKM,OAAL,GAAe,IAAIjC,4CAAJ,CAAa,CAAb,EAAgB6B,GAAhB,CAAf;AACA,SAAKK,QAAL,GAAgB,KAAhB;;AACA,QAAIF,WAAJ,EAAiB;AACf,WAAKG,QAAL,GAAgB,IAAInC,4CAAJ,CACd,CAACG,IAAI,CAACiC,MAAL,KAAgB,KAAKT,MAArB,GAA8B,CAA9B,GAAkCA,MAAnC,IAA6C,EAD/B,EAEd,CAACxB,IAAI,CAACiC,MAAL,KAAgB,KAAKT,MAArB,GAA8B,CAA9B,GAAkCA,MAAnC,IAA6C,EAF/B,CAAhB;AAID,KALD,MAMK;AACH,WAAKQ,QAAL,GAAgB,IAAInC,4CAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAhB;AACD;AACF;;;;WACD,cAAKqC,GAAL,EAAU;AAERA,SAAG,CAACC,IAAJ;AACAD,SAAG,CAACE,SAAJ,GAAgB,KAAKX,KAArB;AACAS,SAAG,CAACG,SAAJ;AACAH,SAAG,CAACI,GAAJ,CAAQ,KAAKxC,CAAb,EAAgB,KAAKC,CAArB,EAAwB,KAAKyB,MAA7B,EAAqC,CAArC,EAAwCxB,IAAI,CAACuC,EAAL,GAAU,CAAlD,EAAqD,IAArD;AACAL,SAAG,CAACM,SAAJ;AACAN,SAAG,CAACO,IAAJ;AACAP,SAAG,CAACQ,OAAJ;AACD;;;WACD,yBAAgBC,EAAhB,EAAoB;AAClB,WAAK7C,CAAL,IAAU,KAAKkC,QAAL,CAAclC,CAAd,GAAkB6C,EAA5B;AACA,WAAK5C,CAAL,IAAU,KAAKiC,QAAL,CAAcjC,CAAd,GAAkB4C,EAA5B;AACD;;;WACD,sBAAaA,EAAb,EAAiB;AACf,WAAKX,QAAL,CAAcpB,OAAd,CAAsB,KAAKmB,QAA3B;AACA,WAAKC,QAAL,CAAcY,WAAd,CAA0B,KAAKd,OAAL,CAAae,QAAb,CAAsBF,EAAtB,CAA1B;AACD;;;;;;IAGGG,Q;AACJ,sBAAc;AAAA;;AACZ,SAAKC,KAAL,GAAapB,KAAb;AACD;;;;WAED,cAAKO,GAAL,EAAU;AACR,WAAKa,KAAL,CAAWC,OAAX,CAAmB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC3BhB,WAAG,CAACG,SAAJ;AACAH,WAAG,CAACiB,MAAJ,CAAWF,CAAC,CAAC,CAAD,CAAD,CAAKnD,CAAhB,EAAmBmD,CAAC,CAAC,CAAD,CAAD,CAAKlD,CAAxB;AACAmC,WAAG,CAACkB,MAAJ,CAAWH,CAAC,CAAC,CAAD,CAAD,CAAKnD,CAAhB,EAAmBmD,CAAC,CAAC,CAAD,CAAD,CAAKlD,CAAxB;AACAmC,WAAG,CAACM,SAAJ;AACAN,WAAG,CAACmB,SAAJ,GAAgB,CAAhB;AACAnB,WAAG,CAACoB,QAAJ,GAAe,OAAf;AACApB,WAAG,CAACqB,WAAJ,GAAkB,OAAlB;AACArB,WAAG,CAACsB,MAAJ;AACD,OATD;AAUD;;;;;;IAGGC,sC;AACJ,kDAAYvB,GAAZ,EAAiB;AAAA;;AACf,SAAKA,GAAL,GAAWA,GAAX;AACA,SAAKwB,GAAL,GAAWxB,GAAG,CAACyB,MAAf;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,aAAL,GAAqB,KAArB;AACA,SAAKC,IAAL;AACD;;;;WAED,gBAAO;AACL,WAAKC,IAAL,GAAY,CAAZ;AACA,WAAKC,aAAL;AACA,WAAKC,YAAL;AACA,WAAKC,UAAL;AACA,WAAKC,OAAL;AACD;;;WAED,wBAAe;AACb,WAAKC,QAAL,GAAgB,IAAItB,QAAJ,EAAhB;AACA,WAAKsB,QAAL,CAAcC,IAAd,CAAmB,KAAKnC,GAAxB;AACD;;;WAED,sBAAa;AACX,WAAKoC,yBAAL;AACA,WAAKC,cAAL;AACD;;;WAED,qCAA4B;AAAA;;AAC1BC,YAAM,CAACC,gBAAP,CAAwB,kBAAxB,EAA4C,YAAM;AAChD,YAAIC,QAAQ,CAACC,eAAT,KAA6B,SAAjC,EAA4C;AAC1C,eAAI,CAACd,aAAL,GAAqB,IAArB;AACD,SAFD,MAGK;AACH,eAAI,CAACA,aAAL,GAAqB,KAArB;AACA,eAAI,CAACE,IAAL,GAAYa,WAAW,CAACC,GAAZ,EAAZ;AACD;AACF,OARD;AASD;;;WAED,0BAAiB;AAAA;;AACf,WAAKnB,GAAL,CAASe,gBAAT,CAA0B,OAA1B,EAAmC,UAACK,CAAD,EAAO;AACxC,YAAMC,IAAI,GAAGD,CAAC,CAACE,MAAF,CAASC,qBAAT,EAAb;AACA,YAAMC,MAAM,GAAGJ,CAAC,CAACK,OAAF,GAAYJ,IAAI,CAACK,IAAhC;AACA,YAAMC,MAAM,GAAGP,CAAC,CAACQ,OAAF,GAAYP,IAAI,CAACQ,GAAhC;;AAEA,cAAI,CAAC3B,KAAL,CAAW4B,IAAX,CAAgB,IAAI5D,IAAJ,CAASsD,MAAT,EAAiBG,MAAjB,CAAhB;AACD,OAND;AAOD;;;WAED,mBAAU;AACR,UAAI,KAAKxB,aAAT,EAAwB;AACtB,aAAKM,OAAL;AACD;;AACD,UAAMsB,KAAK,GAAG,IAAd;AACA,UAAM9C,EAAE,GAAG,CAACiC,WAAW,CAACC,GAAZ,KAAoB,KAAKd,IAA1B,IAAkC,IAA7C;AACA,WAAK7B,GAAL,CAASwD,SAAT,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,KAAKhC,GAAL,CAAStC,KAAlC,EAAyC,KAAKsC,GAAL,CAASrC,MAAlD;AACA,WAAKsE,YAAL,CAAkBhD,EAAlB;AACA,WAAKyB,QAAL,CAAcC,IAAd,CAAmB,KAAKnC,GAAxB;AACA,WAAK6B,IAAL,GAAYa,WAAW,CAACC,GAAZ,EAAZ;AACAe,2BAAqB,CAAC,KAAKzB,OAAL,CAAa0B,IAAb,CAAkBJ,KAAlB,CAAD,CAArB;AACD;;;WAED,sBAAa9C,EAAb,EAAiB;AAAA;;AAEf,WAAKiB,KAAL,CAAWZ,OAAX,CAAmB,UAACC,CAAD,EAAIC,CAAJ,EAAU;AAC3BD,SAAC,CAACoB,IAAF,CAAO,MAAI,CAACnC,GAAZ;AACAe,SAAC,CAAC6C,eAAF,CAAkBnD,EAAlB;;AACA,YAAIM,CAAC,CAACnD,CAAF,GAAM,MAAI,CAAC4D,GAAL,CAAStC,KAAf,IAAwB6B,CAAC,CAAClD,CAAF,GAAM,MAAI,CAAC2D,GAAL,CAASrC,MAAvC,IAAiD4B,CAAC,CAACnD,CAAF,GAAM,CAA3D,EAA8D;AAC5D,gBAAI,CAAC8D,KAAL,CAAWmC,MAAX,CAAkB7C,CAAlB,EAAqB,CAArB;AACD;;AACDD,SAAC,CAAC+C,YAAF,CAAerD,EAAf;;AACA,cAAI,CAACsD,aAAL,CAAmBtD,EAAnB;AACD,OARD;AASD;;;WAED,yBAAgB;AACd,WAAKe,GAAL,CAAStC,KAAT,GAAiBD,MAAM,CAACC,KAAxB;AACA,WAAKsC,GAAL,CAASrC,MAAT,GAAkBF,MAAM,CAACE,MAAzB;AACA,WAAKqC,GAAL,CAASwC,KAAT,CAAeC,eAAf,GAAiChF,MAAM,CAACG,UAAxC;AACD;;;WAED,uBAAcqB,EAAd,EAAkB;AAAA;;AAChB,WAAKyB,QAAL,CAAcrB,KAAd,CAAoBC,OAApB,CAA4B,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpC,YAAMkD,QAAQ,GAAG,IAAIvG,4CAAJ,CACfoD,CAAC,CAAC,CAAD,CAAD,CAAKnD,CAAL,GAASmD,CAAC,CAAC,CAAD,CAAD,CAAKnD,CADC,EAEfmD,CAAC,CAAC,CAAD,CAAD,CAAKlD,CAAL,GAASkD,CAAC,CAAC,CAAD,CAAD,CAAKlD,CAFC,CAAjB;;AAIA,cAAI,CAAC6D,KAAL,CAAWZ,OAAX,CAAmB,UAACqD,IAAD,EAAOC,KAAP,EAAiB;AAClC,cAAMC,aAAa,GAAG,IAAI1G,4CAAJ,CACpBwG,IAAI,CAACvG,CAAL,GAASmD,CAAC,CAAC,CAAD,CAAD,CAAKnD,CADM,EAEpBuG,IAAI,CAACtG,CAAL,GAASkD,CAAC,CAAC,CAAD,CAAD,CAAKlD,CAFM,CAAtB;AAIA,cAAMyG,aAAa,GAAG,IAAI3G,4CAAJ,CACpBwG,IAAI,CAACvG,CAAL,GAASmD,CAAC,CAAC,CAAD,CAAD,CAAKnD,CADM,EAEpBuG,IAAI,CAACtG,CAAL,GAASkD,CAAC,CAAC,CAAD,CAAD,CAAKlD,CAFM,CAAtB;AAKA,cAAM0G,iBAAiB,GAAGF,aAAa,CAACG,OAAd,CAAsBN,QAAtB,CAA1B;AACA,cAAMO,iBAAiB,GAAGH,aAAa,CAACE,OAAd,CAAsBN,QAAtB,CAA1B;AACA,cAAMQ,UAAU,GAAGL,aAAa,CAACM,QAAd,CAAuBJ,iBAAvB,CAAnB;AACA,cAAMK,IAAI,GAAGF,UAAU,CAACzG,MAAX,EAAb;AACA,cAAI,CAAC2G,IAAL,EAAW;AACX,cAAMC,kBAAkB,GACtBD,IAAI,GAAGT,IAAI,CAAC7E,MAAZ,IACAiF,iBAAiB,CAACtG,MAAlB,KAA6BiG,QAAQ,CAACjG,MAAT,EAD7B,IAEAwG,iBAAiB,CAACxG,MAAlB,KAA6BiG,QAAQ,CAACjG,MAAT,EAH/B;;AAIA,cAAI4G,kBAAJ,EAAwB;AACtB;AACA;AAEA;AAEA;AACA,gBAAMC,IAAI,GAAGZ,QAAQ,CAACY,IAAT,CAAc,CAAd,CAAb,CAPsB,CAStB;;AACA,gBAAIA,IAAI,CAAC/F,UAAL,CAAgBoF,IAAI,CAACrE,QAArB,IAAiC,CAArC,EAAwC;AACtCgF,kBAAI,CAACpG,OAAL,CAAa,CAAC,CAAd;AACD,aAZqB,CActB;;;AACA,gBAAMqG,KAAK,GAAGpH,yDAAA,CAAsBwG,IAAI,CAACrE,QAA3B,EAAqCoE,QAArC,CAAd,CAfsB,CAiBtB;;AAEA,gBAAMc,MAAM,GAAG,CAACb,IAAI,CAAC7E,MAAL,GAAcoF,UAAU,CAAC3F,UAAX,CAAsB+F,IAAtB,CAAf,IAA8ChH,IAAI,CAACmH,GAAL,CAASF,KAAT,CAA7D,CAnBsB,CAqBtB;;AACA,gBAAIG,KAAK,GAAGf,IAAI,CAACrE,QAAL,CAAcxB,IAAd,CAAmB0G,MAAnB,CAAZ;AACAb,gBAAI,CAACvG,CAAL,IAAUsH,KAAK,CAACtH,CAAN,GAAU6C,EAApB;AACA0D,gBAAI,CAACtG,CAAL,IAAUqH,KAAK,CAACrH,CAAN,GAAU4C,EAApB,CAxBsB,CAyBtB;AAEA;;AACA,gBAAI0E,IAAI,GAAG,IAAIhB,IAAI,CAACvE,OAAL,CAAab,UAAb,CAAwBmG,KAAK,CAACvE,QAAN,CAAeF,EAAf,CAAxB,IAA8C0D,IAAI,CAACrE,QAAL,CAAc9B,aAAd,EAA7D,CA5BsB,CA6BtB;;AACA,gBAAIoH,IAAI,GAAGjB,IAAI,CAACrE,QAAL,CAAca,QAAd,CAAuBwE,IAAvB,CAAX,CA9BsB,CAgCtB;;AACA,gBAAIE,UAAU,GAAGX,UAAU,CAACpG,IAAX,CAAgB8G,IAAI,CAAC7G,UAAL,CAAgBmG,UAAhB,CAAhB,CAAjB,CAjCsB,CAkCtB;;AACA,gBAAIY,WAAW,GAAGF,IAAI,CAACT,QAAL,CAAcU,UAAd,CAAlB,CAnCsB,CAoCtB;;AACAlB,gBAAI,CAACrE,QAAL,GAAgBwF,WAAW,CAACC,SAAZ,CAAsBF,UAAtB,EAAkC,CAAClB,IAAI,CAACtE,QAAxC,CAAhB;AAED;AACF,SA3DD;AA6DD,OAlED;AAmED;;;;;;AAIH2C,QAAQ,CAACD,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAIvC,GAAG,GAAGwC,QAAQ,CAACgD,aAAT,CAAuB,QAAvB,EAAiCC,UAAjC,CAA4C,IAA5C,CAAV;AACA,MAAIC,QAAQ,GAAG,IAAInE,sCAAJ,CAA2CvB,GAA3C,CAAf;AACD,CAHD,E;;;;;;;;;AC1OA","file":"assets/js/inclinedWallBall.js","sourcesContent":["export class Vector2D {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  lengthSquared() {\n    return this.x * this.x + this.y * this.y;\n  }\n  /**\n   * 求純量值\n   *\n   * @returns\n   * @memberof Vector2D\n   */\n  length() {\n    return Math.sqrt(this.lengthSquared());\n  }\n  /**\n   * 複製該向量\n   *\n   * @returns\n   * @memberof Vector2D\n   */\n  clone() {\n    return new Vector2D(this.x, this.y);\n  }\n  /**\n   *倒轉該向量\n   *\n   * @memberof Vector2D\n   */\n  negate() {\n    this.x = - this.x;\n    this.y = - this.y;\n  }\n\n  /**\n   * 把該向量轉變成單位向量\n   *\n   * @returns\n   * @memberof Vector2D\n   */\n  normalize() {\n    let length = this.length(); if (length > 0) {\n      this.x /= length;\n      this.y /= length;\n    }\n    return this.length();\n  }\n\n  /**\n   * 回傳與某向量的向量和\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  add(vec) {\n    return new Vector2D(this.x + vec.x, this.y + vec.y);\n  }\n\n  /**\n   * 加上某向量\n   *\n   * @param {*} vec\n   * @memberof Vector2D\n   */\n  incrementBy(vec) {\n    this.x += vec.x;\n    this.y += vec.y;\n  }\n\n  /**\n   * \n   * 回傳與某向量的向量差\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  subtract(vec) {\n    return new Vector2D(this.x - vec.x, this.y - vec.y);\n  }\n\n  /**\n   * 扣除某向量\n   *\n   * @param {*} vec\n   * @memberof Vector2D\n   */\n  decrementBy(vec) {\n    this.x -= vec.x;\n    this.y -= vec.y;\n  }\n\n\n  /**\n     * 回傳擴增k倍後的向量\n     *\n     * @param {*} k\n     * @memberof Vector2D\n     */\n  multiply(k) {\n    return new Vector2D(k * this.x, k * this.y);\n  }\n\n  /**\n   * 擴增該向量\n   *\n   * @param {*} k\n   * @memberof Vector2D\n   */\n  scaleBy(k) {\n    this.x *= k; this.y *= k;\n  }\n\n\n  /**\n   * 求取該向量與其他向量的內積\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  dotProduct(vec) {\n    return this.x * vec.x + this.y * vec.y;\n  }\n\n  /**\n   * 求取此向量映射在某向量上的長度\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  projection(vec) {\n    const length = this.length();\n    const lengthVec = vec.length();\n    let proj;\n    if ((length == 0) || (lengthVec == 0)) {\n      proj = 0;\n    } else {\n      proj = (this.x * vec.x + this.y * vec.y) / lengthVec;\n    }\n    return proj;\n  }\n\n  /**\n   * 回傳一個新向量，新向量的方向會跟作為參數向量相同，但是量值上是作為此向量投射在參數向量上的長度\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  project(vec) {\n    return vec.para(this.projection(vec));\n  }\n\n\n  /**\n     * 根據傳入的u值來回傳一個u倍(或-u倍)的單位向量\n     *\n     * @param {*} vec\n     * @returns\n     * @memberof Vector2D\n     */\n  para(u, positive = true) {\n\n    const length = this.length();\n    const vec = new Vector2D(this.x, this.y);\n    if (positive) {\n      vec.scaleBy(u / length);\n    } else {\n      vec.scaleBy(-u / length);\n    }\n    return vec;\n  }\n\n\n  /**\n   * 回傳垂直與此向量的u倍單位向量\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  perp(u, anticlockwise = true) {\n    if (typeof (anticlockwise) === 'undefined') anticlockwise = true;\n    var length = this.length();\n    var vec = new Vector2D(this.y, -this.x);\n    if (length > 0) {\n      if (anticlockwise) {\n        vec.scaleBy(u / length);\n      } else {\n        vec.scaleBy(-u / length);\n      }\n    } else {\n      vec = new Vector2D(0, 0);\n    }\n    return vec;\n  }\n\n  addScaled(vec, k) {\n    return new Vector2D(this.x + k * vec.x, this.y + k * vec.y);\n  }\n\n\n  /**\n   * 求取該向量與其他向量的夾角\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  static angleBetween = function (vec1, vec2) {\n    return Math.acos(vec1.dotProduct(vec2) / (vec1.length() * vec2.length()));\n  }\n\n}\n\nexport class Point2D {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Vector2D, Point2D } from '../class';\n\nconst CANVAS = {\n  width: 600,\n  height: 600,\n  background: 'gray'\n}\n\nconst BALL = {\n  radius: 15,\n  color: '#333'\n}\n\nconst ACC = 100;\n\nconst WALLS = [\n  [new Point2D(50, 50), new Point2D(50, 550)],// 左邊界\n  [new Point2D(550, 50), new Point2D(550, 550)],//右邊界\n  [new Point2D(50, 550), new Point2D(550, 550)],//下邊界\n  [new Point2D(125, 150), new Point2D(475, 100)],// 第一斜坡\n  [new Point2D(75, 250), new Point2D(425, 300)],// 第二斜坡\n  [new Point2D(125, 450), new Point2D(550, 400)]// 第三斜坡\n]\n\nclass Ball {\n  constructor(x, y, color = BALL.color, radius = BALL.radius, randomSpeed = true) {\n    this.x = x;\n    this.y = y;\n    this.color = color;\n    this.radius = radius;\n    this.gravity = new Vector2D(0, ACC);\n    this.friction = 0.999;\n    if (randomSpeed) {\n      this.velocity = new Vector2D(\n        (Math.random() * this.radius * 2 - radius) * 10,\n        (Math.random() * this.radius * 2 - radius) * 10\n      )\n    }\n    else {\n      this.velocity = new Vector2D(0, 0);\n    }\n  }\n  draw(ctx) {\n\n    ctx.save()\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  }\n  refreshLocation(dt) {\n    this.x += this.velocity.x * dt;\n    this.y += this.velocity.y * dt;\n  }\n  refreshSpeed(dt) {\n    this.velocity.scaleBy(this.friction);\n    this.velocity.incrementBy(this.gravity.multiply(dt));\n  }\n}\n\nclass Boundary {\n  constructor() {\n    this.walls = WALLS;\n  }\n\n  draw(ctx) {\n    this.walls.forEach((o, i) => {\n      ctx.beginPath();\n      ctx.moveTo(o[0].x, o[0].y);\n      ctx.lineTo(o[1].x, o[1].y);\n      ctx.closePath();\n      ctx.lineWidth = 5;\n      ctx.lineJoin = 'round';\n      ctx.strokeStyle = 'white';\n      ctx.stroke();\n    })\n  }\n}\n\nclass InclinedWallsAndBouncingBallsAnimation {\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.cvs = ctx.canvas;\n    this.balls = [];\n    this.frameIsPaused = false;\n    this.init();\n  }\n\n  init() {\n    this.time = 0;\n    this.setCanvasSize();\n    this.initBoundary();\n    this.initEvents();\n    this.animate();\n  }\n\n  initBoundary() {\n    this.boundary = new Boundary();\n    this.boundary.draw(this.ctx);\n  }\n\n  initEvents() {\n    this.initVisibilityChangeEvent();\n    this.initClickEvent();\n  }\n\n  initVisibilityChangeEvent() {\n    window.addEventListener('visibilitychange', () => {\n      if (document.visibilityState !== \"visible\") {\n        this.frameIsPaused = true;\n      }\n      else {\n        this.frameIsPaused = false;\n        this.time = performance.now();\n      }\n    });\n  }\n\n  initClickEvent() {\n    this.cvs.addEventListener('click', (e) => {\n      const rect = e.target.getBoundingClientRect();\n      const mouseX = e.clientX - rect.left;\n      const mouseY = e.clientY - rect.top;\n\n      this.balls.push(new Ball(mouseX, mouseY))\n    })\n  }\n\n  animate() {\n    if (this.frameIsPaused) {\n      this.animate();\n    }\n    const $this = this;\n    const dt = (performance.now() - this.time) / 1000;\n    this.ctx.clearRect(0, 0, this.cvs.width, this.cvs.height);\n    this.animateBalls(dt);\n    this.boundary.draw(this.ctx);\n    this.time = performance.now();\n    requestAnimationFrame(this.animate.bind($this));\n  }\n\n  animateBalls(dt) {\n\n    this.balls.forEach((o, i) => {\n      o.draw(this.ctx);\n      o.refreshLocation(dt);\n      if (o.x > this.cvs.width || o.y > this.cvs.height || o.x < 0) {\n        this.balls.splice(i, 1);\n      }\n      o.refreshSpeed(dt);\n      this.checkBoundary(dt);\n    })\n  }\n\n  setCanvasSize() {\n    this.cvs.width = CANVAS.width;\n    this.cvs.height = CANVAS.height;\n    this.cvs.style.backgroundColor = CANVAS.background;\n  }\n\n  checkBoundary(dt) {\n    this.boundary.walls.forEach((o, i) => {\n      const vectorAB = new Vector2D(\n        o[1].x - o[0].x,\n        o[1].y - o[0].y\n      )\n      this.balls.forEach((ball, index) => {\n        const vectorAToBall = new Vector2D(\n          ball.x - o[0].x,\n          ball.y - o[0].y\n        );\n        const vectorBToBall = new Vector2D(\n          ball.x - o[1].x,\n          ball.y - o[1].y\n        );\n\n        const vectorAToBallProj = vectorAToBall.project(vectorAB);\n        const vectorBToBallProj = vectorBToBall.project(vectorAB);\n        const distVector = vectorAToBall.subtract(vectorAToBallProj);\n        const dist = distVector.length();\n        if (!dist) return;\n        const collisionDetection =\n          dist < ball.radius &&\n          vectorAToBallProj.length() < vectorAB.length() &&\n          vectorBToBallProj.length() < vectorAB.length();\n        if (collisionDetection) {\n          // 這邊是要先做reposition的部分\n          // 這邊的算法是利用『插進牆壁後的球到牆壁距離+球的半徑 = (球在正確的碰撞點到已經插進牆壁這一幀的實際距離, 也就是deltaS)*sin(90度 - 入射角)』\n\n          // 這邊一連串的動作是要把deltaS從純量轉換成向量，以便用substract方法去把球的位置倒回去正確的碰撞點\n\n          // perp 是牆壁的單位法向量\n          const perp = vectorAB.perp(1);\n\n          // 這邊因為單位法向量的n必須要跟球的來向大致相反(也就是向量要夾超過90度)，而perp本身又沒有辦法確定到底是取到正或反的法向量，所以要補一個防呆\n          if (perp.dotProduct(ball.velocity) > 0) {\n            perp.scaleBy(-1)\n          }\n\n          // 球速向量和牆壁的夾角\n          const angle = Vector2D.angleBetween(ball.velocity, vectorAB);\n\n          // 我們可以藉由算 (球半徑＋球到牆壁距離向量和牆壁法向量的內積)/sin(球速與牆壁夾角) 來取得deltaS\n\n          const deltaS = (ball.radius + distVector.dotProduct(perp)) / Math.sin(angle);\n\n          // 把球速轉化成單位向量，接著再擴張deltaS倍，這樣就能取的到底要倒回去多少距離才能來到正確的碰撞點\n          let displ = ball.velocity.para(deltaS);\n          ball.x -= displ.x * dt;\n          ball.y -= displ.y * dt;\n          //到這邊就reposition完畢～\n\n          // 這邊的vcor是我們之前有提到過，加速度和幀間誤差的相互關係會導致球被額外加速一小段距離，而這邊可以藉由乘以vcor 這個參數來抵銷多餘的加速量\n          var vcor = 1 - ball.gravity.dotProduct(displ.multiply(dt)) / ball.velocity.lengthSquared();\n          // 原速度乘以vcor\n          var Velo = ball.velocity.multiply(vcor);\n\n          // 這邊就是取球速於牆壁法線方向的分量\n          var normalVelo = distVector.para(Velo.projection(distVector));\n          // 這邊則是取球速平行於牆壁的分量\n          var tangentVelo = Velo.subtract(normalVelo);\n          // 兩者合併就是反射後的速度\n          ball.velocity = tangentVelo.addScaled(normalVelo, -ball.friction);\n\n        }\n      })\n\n    })\n  }\n}\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let ctx = document.querySelector('canvas').getContext('2d');\n  let instance = new InclinedWallsAndBouncingBallsAnimation(ctx);\n})","// extracted by mini-css-extract-plugin\nexport {};"],"sourceRoot":""}