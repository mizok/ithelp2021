{"version":3,"sources":["webpack://webpack_playground/./src/js/class.js","webpack://webpack_playground/webpack/bootstrap","webpack://webpack_playground/webpack/runtime/define property getters","webpack://webpack_playground/webpack/runtime/hasOwnProperty shorthand","webpack://webpack_playground/webpack/runtime/make namespace object","webpack://webpack_playground/./src/js/elastic-2d/index.js","webpack://webpack_playground/./src/scss/main.scss"],"names":["Vector2D","x","y","Math","sqrt","lengthSquared","length","vec","k","lengthVec","proj","para","projection","u","positive","scaleBy","anticlockwise","vec1","vec2","acos","dotProduct","Point2D","CANVAS","width","height","background","MAX_GRAB_DIST","FRICTION_HALF__LIFE","BALL","radius","color","CORDS","elasticConst","GRAVITY","BALL_MASS_CONST","Ball","fixed","mass","velocity","force","acc","gravity","ball","dx","dy","vectorBetween","lengthAlpha","lengthVector","multiply","ctx","save","fillStyle","beginPath","arc","PI","closePath","fill","restore","Cord","ballFormer","ballLatter","cordLength","cordWidth","distBetween","deltaLength","forceValue","moveTo","lineTo","strokeStyle","lineWidth","stroke","Elastic2DCordAnimation","cvs","canvas","balls","cords","frameIsPaused","ballGrabbed","init","time","setCanvasSize","initEntities","initEvents","animate","i","cordsBefore","filter","cord","index","map","reduce","prev","next","gap","push","initVisibilityChangeEvent","initMouseEvent","window","addEventListener","document","visibilityState","performance","now","style","backgroundColor","$this","frameDelay","correct","dt","clearRect","refreshCords","refreshBalls","drawAll","requestAnimationFrame","bind","calcForce","incrementBy","add","frictionConst","pow","dv","forEach","o","draw","shortestDist","getDist","dist","pullBall","e","mouseX","clientX","getBoundingClientRect","left","mouseY","clientY","top","grabBall","querySelector","getContext","instance"],"mappings":"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","file":"assets/js/elastic2d.js","sourcesContent":["export class Vector2D {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n  lengthSquared() {\n    return this.x * this.x + this.y * this.y;\n  }\n  /**\n   * 求純量值\n   *\n   * @returns\n   * @memberof Vector2D\n   */\n  length() {\n    return Math.sqrt(this.lengthSquared());\n  }\n  /**\n   * 複製該向量\n   *\n   * @returns\n   * @memberof Vector2D\n   */\n  clone() {\n    return new Vector2D(this.x, this.y);\n  }\n  /**\n   *倒轉該向量\n   *\n   * @memberof Vector2D\n   */\n  negate() {\n    this.x = - this.x;\n    this.y = - this.y;\n  }\n\n  /**\n   * 把該向量轉變成單位向量\n   *\n   * @returns\n   * @memberof Vector2D\n   */\n  normalize() {\n    let length = this.length(); if (length > 0) {\n      this.x /= length;\n      this.y /= length;\n    }\n    return this.length();\n  }\n\n  /**\n   * 回傳與某向量的向量和\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  add(vec) {\n    return new Vector2D(this.x + vec.x, this.y + vec.y);\n  }\n\n  /**\n   * 加上某向量\n   *\n   * @param {*} vec\n   * @memberof Vector2D\n   */\n  incrementBy(vec) {\n    this.x += vec.x;\n    this.y += vec.y;\n  }\n\n  /**\n   * \n   * 回傳與某向量的向量差\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  subtract(vec) {\n    return new Vector2D(this.x - vec.x, this.y - vec.y);\n  }\n\n  /**\n   * 扣除某向量\n   *\n   * @param {*} vec\n   * @memberof Vector2D\n   */\n  decrementBy(vec) {\n    this.x -= vec.x;\n    this.y -= vec.y;\n  }\n\n\n  /**\n     * 回傳擴增k倍後的向量\n     *\n     * @param {*} k\n     * @memberof Vector2D\n     */\n  multiply(k) {\n    return new Vector2D(k * this.x, k * this.y);\n  }\n\n  /**\n   * 擴增該向量\n   *\n   * @param {*} k\n   * @memberof Vector2D\n   */\n  scaleBy(k) {\n    this.x *= k; this.y *= k;\n  }\n\n\n  /**\n   * 求取該向量與其他向量的內積\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  dotProduct(vec) {\n    return this.x * vec.x + this.y * vec.y;\n  }\n\n  /**\n   * 求取此向量映射在某向量上的長度\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  projection(vec) {\n    const length = this.length();\n    const lengthVec = vec.length();\n    let proj;\n    if ((length == 0) || (lengthVec == 0)) {\n      proj = 0;\n    } else {\n      proj = (this.x * vec.x + this.y * vec.y) / lengthVec;\n    }\n    return proj;\n  }\n\n  /**\n   * 回傳一個新向量，新向量的方向會跟作為參數向量相同，但是量值上是作為此向量投射在參數向量上的長度\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  project(vec) {\n    return vec.para(this.projection(vec));\n  }\n\n\n  /**\n     * 根據傳入的u值來回傳一個u倍(或-u倍)的單位向量\n     *\n     * @param {*} vec\n     * @returns\n     * @memberof Vector2D\n     */\n  para(u, positive = true) {\n\n    const length = this.length();\n    const vec = new Vector2D(this.x, this.y);\n    if (positive) {\n      vec.scaleBy(u / length);\n    } else {\n      vec.scaleBy(-u / length);\n    }\n    return vec;\n  }\n\n\n  /**\n   * 回傳垂直與此向量的u倍單位向量\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  perp(u, anticlockwise = true) {\n    if (typeof (anticlockwise) === 'undefined') anticlockwise = true;\n    var length = this.length();\n    var vec = new Vector2D(this.y, -this.x);\n    if (length > 0) {\n      if (anticlockwise) {\n        vec.scaleBy(u / length);\n      } else {\n        vec.scaleBy(-u / length);\n      }\n    } else {\n      vec = new Vector2D(0, 0);\n    }\n    return vec;\n  }\n\n  addScaled(vec, k) {\n    return new Vector2D(this.x + k * vec.x, this.y + k * vec.y);\n  }\n\n\n  /**\n   * 求取該向量與其他向量的夾角\n   *\n   * @param {*} vec\n   * @returns\n   * @memberof Vector2D\n   */\n  static angleBetween = function (vec1, vec2) {\n    return Math.acos(vec1.dotProduct(vec2) / (vec1.length() * vec2.length()));\n  }\n\n}\n\nexport class Point2D {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Vector2D } from '../class';\n\nconst CANVAS = {\n  width: 800,\n  height: 600,\n  background: 'gray'\n}\n\nconst MAX_GRAB_DIST = 50;\nconst FRICTION_HALF__LIFE = 1.5;\n\nconst BALL = {\n  radius: 2,\n  color: 'white'\n}\n\nconst CORDS = [\n  {\n    length: 10,\n    elasticConst: 100,\n  },\n  {\n    length: 10,\n    elasticConst: 100,\n  },\n  {\n    length: 10,\n    elasticConst: 100,\n  },\n  {\n    length: 10,\n    elasticConst: 100,\n  },\n  {\n    length: 10,\n    elasticConst: 100,\n  },\n  {\n    length: 10,\n    elasticConst: 100,\n  }\n\n\n]\n\n\n\nconst GRAVITY = 9.8;\n\n\n\nconst BALL_MASS_CONST = 1;\n\nclass Ball {\n  constructor(x, y, radius, color, fixed) {\n    this.radius = radius;\n    this.mass = BALL_MASS_CONST * radius;\n    this.color = color;\n    this.fixed = fixed; //球是否固定在當前空間中 \n\n    this.x = x;\n    this.y = y;\n    this.velocity = new Vector2D(0, 0);\n    this.force = new Vector2D(0, 0)\n    this.acc = new Vector2D(0, 0);\n    this.gravity = new Vector2D(0, GRAVITY);\n  }\n\n  // 這次我們給球的class 新增這一個方法。用途是用來計算與另外一顆球的距離向量(不含兩顆球的半徑)\n  distBetween(ball) {\n    const dx = ball.x - this.x;\n    const dy = ball.y - this.y;\n    const vectorBetween = new Vector2D(dx, dy);\n    const lengthAlpha = vectorBetween.length();\n    const length = vectorBetween.length() - this.radius - ball.radius;\n    const lengthVector = vectorBetween.multiply(length / lengthAlpha);\n    return lengthVector;\n  }\n\n  draw(ctx) {\n    ctx.save()\n    ctx.fillStyle = this.color;\n    ctx.beginPath();\n    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);\n    ctx.closePath();\n    ctx.fill();\n    ctx.restore();\n  }\n}\n\n// 這次的我們沒有要用之前寫的Spring ，而是新增了Cord(弦)這個類，弦在初始化的時候必須要傳入兩個Ball的實例，還有弦的原始長度、弦的彈性係數\nclass Cord {\n  constructor(ballFormer, ballLatter, cordLength, elasticConst, cordWidth = 1, color = '#555') {\n    this.ballFormer = ballFormer; //上面端點的球\n    this.ballLatter = ballLatter;//下面端點的球\n    this.cordLength = cordLength;  // 原始長度\n    this.elasticConst = elasticConst;   //彈性係數\n    this.cordWidth = cordWidth;\n    this.color = color;\n  }\n\n  lengthVector() {\n    return this.ballFormer.distBetween(this.ballLatter);\n  }\n\n  calcForce() {\n    const deltaLength = this.lengthVector().length() - this.cordLength; // 變形量\n    const forceValue = deltaLength * this.elasticConst;\n    const force = this.lengthVector().para(forceValue, false);// 這邊要注意 force 會跟變形量的方向相反, 所以para的第二參數要給false來轉變成逆向\n\n    return force;\n  }\n\n  draw(ctx) {\n    ctx.beginPath();\n    ctx.moveTo(this.ballFormer.x, this.ballFormer.y);\n    ctx.lineTo(this.ballLatter.x, this.ballLatter.y);\n    ctx.strokeStyle = this.color;\n    ctx.lineWidth = this.cordWidth;\n    ctx.stroke();\n    ctx.closePath();\n  }\n\n}\n\nclass Elastic2DCordAnimation {\n  constructor(ctx) {\n    this.ctx = ctx;\n    this.cvs = ctx.canvas;\n    this.balls = [];\n    this.cords = [];\n    this.frameIsPaused = false;\n    this.ballGrabbed = null;\n    this.init();\n  }\n  // 入口方法\n  init() {\n    this.time = 0;\n    this.setCanvasSize();\n    this.initEntities();\n    this.initEvents();\n    this.animate();\n  }\n  // 把所有的實體(entity) 也就是弦和球都先做實例的初始化\n  initEntities() {\n    // init balls;\n    for (let i = 0; i <= CORDS.length; i++) {\n      const x = this.cvs.width / 2;\n      let y = 0;\n      const cordsBefore = CORDS.filter((cord, index) => {\n        return index < i\n      })\n      // 依據每條弦的長短，總合出球的具體位置\n      // 這邊大於0的判斷是用來排除掉第一條弦用的\n      if (cordsBefore.length > 0) {\n        y = cordsBefore.map(cord => cord.length).reduce((prev, next, index) => {\n          const gap = index >= 1 ? BALL.radius * 2 : 0;\n          return prev + next + gap;\n        }, BALL.radius)\n      }\n      // 最頂端，也就是連結天花板的部分也會被視為一顆球，但是這顆球半徑為0，而且會有『固定（fixed）』屬性\n      this.balls.push(new Ball(x, y, i === 0 ? 0 : BALL.radius, BALL.color, i === 0))\n    }\n\n    // init cords\n    for (let i = 0; i < CORDS.length; i++) {\n      const cord = new Cord(this.balls[i], this.balls[i + 1], CORDS[i].length, CORDS[i].elasticConst)\n      this.cords.push(cord);\n    }\n\n\n  }\n\n\n  initEvents() {\n    this.initVisibilityChangeEvent();\n    this.initMouseEvent();\n  }\n\n  initVisibilityChangeEvent() {\n    window.addEventListener('visibilitychange', () => {\n      if (document.visibilityState !== \"visible\") {\n        this.frameIsPaused = true;\n      }\n      else {\n        this.frameIsPaused = false;\n        this.time = performance.now();\n      }\n    });\n  }\n\n  setCanvasSize() {\n    this.cvs.width = CANVAS.width;\n    this.cvs.height = CANVAS.height;\n    this.cvs.style.backgroundColor = CANVAS.background;\n  }\n\n  animate() {\n    if (this.frameIsPaused) {\n      this.animate();\n    }\n    const $this = this;\n    const frameDelay = 10 // frameDelay 是用來做動畫抽幀的常數，可以想像成會讓動畫加速！\n    const correct = 1000;\n    const dt = (performance.now() - this.time) * frameDelay / (1000 * correct);\n    this.ctx.clearRect(0, 0, this.cvs.width, this.cvs.height);\n\n    for (let i = 0; i < correct; i++) {\n      this.refreshCords(); //更新弦\n      this.refreshBalls(dt); //更新球\n    }\n\n    this.drawAll(dt); // 把全部都畫出來\n\n\n    this.time = performance.now();\n    requestAnimationFrame(this.animate.bind($this));\n  }\n\n  refreshCords() {\n    for (let i = 0; i < this.cords.length; i++) {\n      const cord = this.cords[i];\n      const force = cord.calcForce();\n      // 這邊要格外注意的是ballFormer 是用incrementBy, 而不是add, 原因是因為在跑loop的時候，前面幾圈可能已經有賦予ballFormer force ，如果用add給新值，前面的值就被吃掉了\n      cord.ballFormer.force.incrementBy(force.multiply(-1).add(cord.ballFormer.gravity.multiply(cord.ballFormer.mass)));\n      // 但是 ballLatter就可以直接用add了\n      cord.ballLatter.force = force.add(cord.ballLatter.gravity.multiply(cord.ballLatter.mass));\n\n\n    }\n  }\n\n  refreshBalls(dt) {\n    const frictionConst = Math.pow(0.5, dt / FRICTION_HALF__LIFE);\n    for (const ball of this.balls) {\n      if (!ball.fixed) {\n        // 速度變化量的向量\n        const dv = ball.force.multiply(dt / ball.mass);\n\n        // 更新位置\n        ball.x += dt * (ball.velocity.x + dv.x / 2);\n        ball.y += dt * (ball.velocity.y + dv.y / 2);\n\n        // 先做摩擦力的耗損運算，然後再加上新的速度變化量\n        ball.velocity.scaleBy(frictionConst);\n        ball.velocity.incrementBy(dv);\n\n      }\n\n    }\n  }\n\n  drawAll(dt) {\n    // 把球和弦都個別畫出來\n    this.cords.forEach((o, i) => {\n      o.draw(this.ctx);\n    })\n    this.balls.forEach((o, i) => {\n      o.draw(this.ctx);\n    })\n  }\n\n  getDist = (x, y, ball) => {\n    return Math.sqrt((x - ball.x) * (x - ball.x) + (y - ball.y) * (y - ball.y));\n  }\n\n  grabBall(x, y) {\n    if (!!this.ballGrabbed) return;\n    // 用泡沫排序法去求得目前距離滑鼠位置最近的球\n    this.ballGrabbed = this.balls[0];\n    let shortestDist = this.getDist(x, y, this.ballGrabbed);\n    for (const ball of this.balls) {\n      const dist = this.getDist(x, y, ball);\n      if (dist <= shortestDist) {\n        shortestDist = dist;\n        this.ballGrabbed = ball;\n      }\n    }\n    if (this.ballGrabbed.fixed || shortestDist > MAX_GRAB_DIST) return;\n    this.pullBall(x, y, shortestDist)\n  }\n\n  pullBall(x, y) {\n    if (!this.ballGrabbed || this.ballGrabbed.fixed) return; // 如果已經有被抓到的球或是抓到的球本身有fixed屬性則return\n    if (this.getDist(x, y, this.ballGrabbed) > MAX_GRAB_DIST) return; // 這邊是抓取的最大距離防呆\n    this.ballGrabbed.x = x;\n    this.ballGrabbed.y = y;\n    this.ballGrabbed.velocity = new Vector2D(0, 0);\n  }\n\n  initMouseEvent() {\n    this.cvs.addEventListener('mousedown', (e) => {\n      const mouseX = e.clientX - this.cvs.getBoundingClientRect().left;\n      const mouseY = e.clientY - this.cvs.getBoundingClientRect().top;\n      this.grabBall(mouseX, mouseY);\n    });\n    this.cvs.addEventListener('mouseup', () => {\n      this.ballGrabbed = null;\n    });\n    this.cvs.addEventListener('mousemove', (e) => {\n      const mouseX = e.clientX - this.cvs.getBoundingClientRect().left;\n      const mouseY = e.clientY - this.cvs.getBoundingClientRect().top;\n      this.pullBall(mouseX, mouseY);\n    });\n    this.cvs.addEventListener('mouseleave', () => {\n      this.ballGrabbed = null;\n    });\n  }\n\n}\n\n\n\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  let ctx = document.querySelector('canvas').getContext('2d');\n  let instance = new Elastic2DCordAnimation(ctx)\n})","// extracted by mini-css-extract-plugin\nexport {};"],"sourceRoot":""}